#=======================================================================================================================
# XO NOT AUTOVERSION
#=======================================================================================================================
version=2.1.9 # -- dscudiero -- 12/14/2016 @ 11:34:20.66
#=======================================================================================================================
# Run every day at noon from cron
#=======================================================================================================================
TrapSigs 'on'
Import FindExecutable GetDefaultsData ParseArgsStd ParseArgs RunSql Msg2 Call
originalArgStr="$*"

#=======================================================================================================================
# Declare local variables and constants
#=======================================================================================================================

#=======================================================================================================================
# Standard argument parsing and initialization
#=======================================================================================================================
GetDefaultsData $myName
ParseArgsStd
scriptArgs="$*"

sendMail=true

#==================================================================================================
# Main
#==================================================================================================
case "$hostName" in
	mojave)
			## Escrow sites
				Msg2 > $tmpFile
				Msg2 "$myName $(date)\n" >> $tmpFile
				Msg2 > $tmpFile

				for client in $(tr ',' ' ' <<< $escrowClients); do
					Call 'escrowClient' "$client" "$scriptArgs"
					Msg2 "^$client" >> $tmpFile
				done
				Msg2 >> $tmpFile

				if [[ $sendMail == true ]]; then
					Msg2 "\nEmails sent to: $escrowEmailAddrs\n" >> $tmpFile
					for emailAddr in $(tr ',' ' ' <<< $escrowEmailAddrs); do
						mail -s "$myName: Clients escrowed" $emailAddrs < $tmpFile
					done
				fi
				[[ -f $tmpFile ]] && rm -f $tmpFile
			;;
	build5)
			;;
	build7)
			;;
esac

#========================================================================================================================
## Bye-bye
[[ $fork == true ]] && wait
return 0

#========================================================================================================================
# Change Log
#========================================================================================================================
