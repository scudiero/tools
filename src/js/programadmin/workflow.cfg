
//======================================================================================================
// ??/??/16 -- dgs -- initial
// version:1.0.13 // -- dscudiero -- 03/07/2017 @ 10:47:06.25
//======================================================================================================
// Set debug environments, any comma separated combination of 'dev','test','next'. e.g. debugEnvs:dev,test
wfDebugEnvs:dev
//skiploadsync:true;  //Turn off SIS Syncing


// Set debug message level, integer 0-10
// msgLevel = 0, no messages
//			  1, Messages from functions in workflowFuncs atj
//			  2, Messages from utility functions in workflowFuncs atj
//			  3, Messages from functions in workflowLib atj
//			  4, More detail from functions in workflowLib atj
wfDebugLevel:2

//====================================================================================================
//wfcomments = 'all', 'workflow', or some RegEx against the roles.  e.g. 'wfcomments: fyi(all)?$' or 'wfcomments: Committee$'
wfcomments:

//====================================================================================================
// Define which variables are substituted -- used by getCimRoles script
wfSubRule:Col|SELECT code,name,access FROM codedesc WHERE setname="college" and rank >= 0 and (access <> 'retired' OR access IS NULL) order by code
wfSubRule:Cols|SELECT code,name,access FROM codedesc WHERE setname="college" and rank >= 0 and (access <> 'retired' OR access IS NULL) order by code
wfSubRule:Dept|SELECT code,name,access FROM codedesc WHERE setname="department" and rank >= 0 and (access <> 'retired' OR access IS NULL) order by code
wfSubRule:Depts|SELECT code,name,access FROM codedesc WHERE setname="department" and rank >= 0 and (access <> 'retired' OR access IS NULL) order by code
wfSubRule:AcadLevel|SELECT code,name,access FROM codedesc WHERE setname="acad_level" and rank >= 0 and (access <> 'retired' OR access IS NULL) order by code

//==================================================================================================
//Configure Voteing
//==================================================================================================
//voteshowfullresults:true
//votesuccesspct:70%
//voterules:FA_Council_vote|FA Council Vote|7|votepasspct=75%;
//          A              A               A             A
//          |              |               |             |
//          |              |               |             +----  51% of the votes cast have to be yes.
//          |              |               +------- This is the number of days the voting window remains open, 0 means until vote is a success
//          |              +-- This is the 'REAL' RESOLVED name of the voting step
//

//====================================================================================================
// Parallel workflow (esigs) definitions
//esiglist:UCCGC|UCC/GC|function|UCCGCesig;
//esiglist:GCCFS|GC/FS|function|GCFSesig;

//====================================================================================================
// Substitution variables
//====================================================================================================
wfrules:Col|attr|college.code|; //Substitutes current & previous value of 'College' for 'Col'
wfrules:Dept|attr|department.code|; //Substitutes current & previous value of 'Department' for 'Dept'
wfrules:AcadLevel|attr|acad_level.code|; //Substitutes current value of 'Academic Level' for 'AcadLevel'

//====================================================================================================
// Proposal state conditionals
//====================================================================================================
wfrules:isNew|iffieldmatch|newrecord|value=true; //Proposal for a new course/program
wfrules:isEdit|function|IsEdit|; //Proposal to modify an existing course/proposal
wfrules:isDelete|iffieldmatch|deleterec|value=true; //Proposal to delete an existing course/proposal
wfrules:isNotDelete|function|IsNotDelete|; //Proposal is not for a course deletion
wfrules:isNotNew|function|IsNotNew|; //Proposal is not for a new course

//====================================================================================================
// Workflow iffieldmatch rules
//====================================================================================================
wfrules:isUndergraduate|iffieldmatch|acad_level.code|value=UG; //Proposal for an Undergraduate course/program
wfrules:isGraduate|iffieldmatch|acad_level.code|value=GR; //Proposal for an Graduate course/program

//wfrules:????|iffieldmatch|???????.code|value=/^(C$%7CW)$/;

//====================================================================================================
// Workflow function bindings
//====================================================================================================
wfrules:ProposalState|function|ProposalState|; // Substitute proposal state for workflow selection

//====================================================================================================
// Related and Associated steps
//====================================================================================================
//wfrules:RelatedDepts|function|Related|; //Substitutes the Department codes for the associated objects from the form or eco system
//wfrules:RelatedCollege|function|Related|; //Substitutes the College codes for the associated objects from the form or eco system
//RelatedIncludeEcoSystemData:true
//RelatedCheckChanged:true
//RelatedVar:colleges_affected
//RelatedDataFormat:code

//====================================================================================================
// Special service wfrules
//wfrules:AddSisStep|function|AddSisStep|; // Add SIS step (from sisname field) if not DEV
//wfrules:WhatsChanged|function|WhatsChanged|; // Show what has changed
//wfrules:WhatsChanged|function|WhatsChanged|;
//wfrules:wfDumpVars|function|wfDumpVars|

//====================================================================================================
// Workflow selection order, first to last
//====================================================================================================
//wforder:WhatsChanged
//wforder:wfDumpVars cl_subject,other_depts,sponsors

wforder:Subj ProposalState standard
wforder:Subj standard
wforder:Dept ProposalState standard
wforder:Dept standard
wforder:Col ProposalState standard
wforder:Col standard
wforder:ProposalState standard
wforder:standard
