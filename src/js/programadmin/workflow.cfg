//======================================================================================================================
// ??/??/18 - dgs - Initial - ??
//======================================================================================================================
// Set debug environments, any comma separated combination of 'dev','test','next'. e.g. debugEnvs:dev,test
wfDebugEnvs:dev,test
wfDebugLevel:1

//======================================================================================================================
//wfcomments = 'all', 'workflow', or some RegEx against the roles.  e.g. 'wfcomments: fyi(all)?$'
//or 'wfcomments: Committee$'
//======================================================================================================================
wfcomments:

//======================================================================================================================
//Notes to the Client, CSM, Pilot reps, or CIM devs -- used by getWorkflows WorkWith action
// wfNote:{"client","csm","pilot","dev"}|noteText
//======================================================================================================================
wfNote:client|Need specifications for the conditional items highlighed in red
wfNote:csm|Form not completed, workflow has not been tested
wfNote:csm|Cimlookup (sisparent) has not data, department and college resolution will not function as expected
wfNote:pilot|Please review CSM and DEV notes 
//wfNote:dev|

//======================================================================================================================
// Define which variables are substituted -- used by getWorkflows WorkWith action
// wfSubRule:<attrName>|<sql query> or [data enumeration]|<optional mapper type>
//======================================================================================================================
wfSubRule:Col|SELECT code FROM codedesc WHERE setname="college" and rank >= 0 and (access <> 'retired' OR access IS NULL) order by code
wfSubRule:Dept|SELECT code FROM codedesc WHERE setname="department" and rank >= 0 and (access <> 'retired' OR access IS NULL) order by code
wfSubRule:RelatedDepts|wfSubRule(Dept)

//======================================================================================================================
// Substitution variables
//======================================================================================================================
// Add tcfonly=true; to only substitute the tcf data
//======================================================================================================================
wfrules:Col|function|wfAttr|includeTCA noMapValue; //Expands 'Col' to the 'college.code' value from the proposal including TCA data
wfrules:Dept|function|wfAttr|includeTCA noMapValue; //Expands 'Dept' to the 'department.code' value from the proposal including TCA data

//======================================================================================================================
// 'Proposal State' conditionals
//======================================================================================================================
wfrules:isNew|iffieldmatch|newrecord|value=true; //Proposal for a new program
wfrules:isNotNew|function|IsNotNew|; //Proposal is not for a new program
wfrules:isEdit|function|IsEdit|; //Proposal to modify an existing program
wfrules:isNotEdit|iffieldmatch|newrecord|value=true; //Proposal is not Edit
wfrules:isNotEdit|iffieldmatch|deleterec|value=true; //Proposal is not Edit
wfrules:isDelete|iffieldmatch|deleterec|value=true; //Proposal to delete an existing program
wfrules:isNotDelete|function|IsNotDelete|; //Proposal is not for a program deletion
wfrules:isInactivate|function|IsInactivate|; //Proposal to delete an existing program
wfrules:isReactivate|function|IsReactivate|; //Proposal to reactivate an deleted program

//======================================================================================================================
// Academic level
//======================================================================================================================
//wfUgRe:^([1-4]\d{2}[A-Z]{0,1}|[1-9]\d{1}[A-Z]{0,1})$
//wfGrRe:^([5-9]\d{2}[A-Z]{0,1}|[1-9]\d{3}[A-Z]{0,1})$
//wfGrRe:^((?!UGRD).)*$
//wfrules:isUndergraduate|function|CheckAcadLevel|course_number,wfUgRe; //Proposal for an Undergraduate program
//wfrules:isGraduate|function|CheckAcadLevel|course_number,wfGrRe; //Proposal for an Graduate program
//wfrules:AcadLevel|function|GetAcadLevel|course_number,wfUgRe,UG,wfGrRe,GR; //Returns the academic level, 'UG' or 'GR'

//======================================================================================================================
// 'Custom' iffieldmatch conditionals
//======================================================================================================================
//wfrules:conditionalName|iffieldmatch|<someVariable>.code|value=/^(<someValue> %7C <someValue> %7C <someValue>)$/; //Proposal for

//wfrules:isUndergraduate|iffieldmatch|<someVariable>|value=<someValue>; //Proposal for an Undergraduate program
//wfrules:isGraduate|iffieldmatch|<someVariable>|value=<someValue>; //Proposal for an Graduate program

//======================================================================================================================
// 'Custom' Workflow function bindings
//======================================================================================================================

//======================================================================================================================
// 'Standard' Workflow function bindings
//======================================================================================================================
wfrules:RelatedDepts|function|RelatedDepts|; //Standard (core) RelatedDepts
wfrules:ProposalState|function|ProposalState|; //Returns the proposal mode in the set {"NEW","EDIT","DELETE","REACTIVATE"}
//wfrules:Annotate|function|AnnotateWorkflow|; //Annotate workflow -- text to appear in preview workflow
//wfrules:NoWorkflow|function|NoWorkflow|; //There is insufficient data to calculate workflow
//wfrules:NotifyAllApprovers|function|NotifyAll|spprovers; //Adds steps to notify all previous approver steps in workflow
//wfrules:isNotFirstStep|function|IsNotFirstStep|; //Include step only if it will not be the first step in workflow (i.e. for regen)

//======================================================================================================================
// Special service wfrules
//======================================================================================================================
//wfrules:WhatsChanged|function|WhatsChanged|; //Show what has changed
//wforder:WhatsChanged
//wfrules:wfDumpVars|function|wfDumpVars|cl_subject,other_depts,sponsors
//wforder:wfDumpVars

//======================================================================================================================
// Workflow selection order, first to last
//======================================================================================================================
wforder:Col/Dept/Subj Grad ProposalState isGraduate
wforder:Col/Dept/Subj Grad standard isGraduate
wforder:Col/Dept Grad ProposalState isGraduate
wforder:Col/Dept Grad standard isGraduate
wforder:Dept/Subj Grad ProposalState isGraduate
wforder:Dept/Subj Grad standard isGraduate
wforder:Subj Grad ProposalState isGraduate
wforder:Subj Grad standard isGraduate
wforder:Dept Grad ProposalState isGraduate
wforder:Dept Grad standard isGraduate
wforder:Col Grad ProposalState isGraduate
wforder:Col Grad standard isGraduate
wforder:Grad ProposalState isGraduate
wforder:Grad standard isGraduate

wforder:Col/Dept/Subj ProposalState
wforder:Col/Dept/Subj standard
wforder:Col/Dept ProposalState
wforder:Col/Dept standard
wforder:Dept/Subj ProposalState
wforder:Dept/Subj standard
wforder:Subj ProposalState
wforder:Subj standard
wforder:Dept ProposalState
wforder:Dept standard
wforder:Col ProposalState
wforder:Col standard
wforder:ProposalState
wforder:standard
