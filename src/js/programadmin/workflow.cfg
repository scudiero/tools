//======================================================================================================================
// version:1.0.15 // -- dscudiero -- Wed 08/09/2017 @ 11:27:34.37
//======================================================================================================================
// ??/??/?? - dgs - Initial
// 08/08/17 - dgs - Added AcadLevel and refactored wforder
//======================================================================================================================
// Set debug environments, any comma separated combination of 'dev','test','next'. e.g. debugEnvs:dev,test
wfDebugEnvs:dev

// Set debug message level, integer 0-10
// msgLevel = 0, no messages
//			  1, Messages from functions in workflowFuncs atj
//			  2, Messages from utility functions in workflowFuncs atj
//			  3, Messages from functions in workflowLib atj
//			  4, More detail from functions in workflowLib atj
wfDebugLevel:3

//======================================================================================================================
//wfcomments = 'all', 'workflow', or some RegEx against the roles.  e.g. 'wfcomments: fyi(all)?$' or 'wfcomments: Committee$'
wfcomments:

//======================================================================================================================
// Define which variables are substituted -- used by getCimRoles script
wfSubRule:Col|SELECT code,name,access FROM codedesc WHERE setname="college" and rank >= 0 and (access <> 'retired' OR access IS NULL) order by code
wfSubRule:Dept|SELECT code,name,access FROM codedesc WHERE setname="department" and rank >= 0 and (access <> 'retired' OR access IS NULL) order by code
wfSubRule:AcadLevel|SELECT code,name,access FROM codedesc WHERE setname="acad_level" and rank >= 0 and (access <> 'retired' OR access IS NULL) order by code

//======================================================================================================================
// Substitution variables
//======================================================================================================================
// Add tcfonly=true; to only substitute the tcf data
//======================================================================================================================
wfrules:Col|attr|college.code|; //Substitutes current & previous value of 'College' for 'Col'
wfrules:Dept|attr|department.code|; //Substitutes current & previous value of 'Department' for 'Dept'
wfrules:AcadLevel|attr|acad_level.code|; //Substitutes current value of 'Academic Level' for 'AcadLevel'

//==================================================================================================
//Configure Voteing
//==================================================================================================
//voteshowfullresults:true
//votesuccesspct:70%
//voterules:FA_Council_vote|FA Council Vote|7|votepasspct=75%;
//          A              A               A             A
//          |              |               |             |
//          |              |               |             +----  51% of the votes cast have to be yes.
//          |              |               +------- This is the number of days the voting window remains open, 0 means until vote is a success
//          |              +-- This is the 'REAL' RESOLVED name of the voting step
//
//voterules:CC_vote|Curriculum Committee Vote|0|votesuccesspct=total;votepasspct=75%;voteshowfullresults=true;voteadmin=false

//======================================================================================================================
// Parallel workflow (esigs) definitions
//esiglist:UCCGC|UCC/GC|function|UCCGCesig;
//esiglist:GCCFS|GC/FS|function|GCFSesig;

//======================================================================================================================
// Proposal state conditionals
//======================================================================================================================
wfrules:isNew|iffieldmatch|newrecord|value=true; //Proposal for a new course/program
wfrules:isEdit|function|IsEdit|; //Proposal to modify an existing course/proposal
wfrules:isDelete|iffieldmatch|deleterec|value=true; //Proposal to delete an existing course/proposal
wfrules:isNotDelete|function|IsNotDelete|; //Proposal is not for a course deletion
wfrules:isNotNew|function|IsNotNew|; //Proposal is not for a new course

//======================================================================================================================
// Workflow iffieldmatch rules
//======================================================================================================================
// Add |tcfonly=true; to only substitute the tcf data
//======================================================================================================================
wfrules:isUndergraduate|iffieldmatch|acad_level.code|value=UG; //Proposal for an Undergraduate course/program
wfrules:isGraduate|iffieldmatch|acad_level.code|value=GR; //Proposal for an Graduate course/program

//wfrules:????|iffieldmatch|???????.code|value=/^(C$%7CW)$/;

//======================================================================================================================
// Workflow function bindings
//======================================================================================================================
wfrules:ProposalState|function|ProposalState|; // Substitute proposal state for workflow selection

//======================================================================================================================
// Related and Associated steps
//	_formFieldVars
// 		The formate is name[|format][|dataAttributeName] where :
// 		format is one item in the set {courseCode,colCode,deptCode,subjCode}, the default is 'code'
// 		dataAttributeName is the name of the object attribute that contains the data for the reference, default is 'data'
//======================================================================================================================
// Setup rules for non-controlling entities, steps give for each
//
// wfrules:RelatedAndCrosslistedCols|function|Related|; //Includes steps with departments from the Courseleaf eco-system and any crosslisted courses
// RelatedAndCrosslistedCols_formFieldVars:crosslisted|courseCode|code
//
// wfrules:RelatedAndCrosslistedDepts|function|Related|; //Includes steps with departments from the Courseleaf eco-system and any crosslisted courses
// RelatedAndCrosslistedDepts_formFieldVars:crosslisted|courseCode|code
//
// wfrules:RelatedAndCrosslistedSubjs|function|Related|; //Includes steps with subjects from the Courseleaf eco-system and any crosslisted courses
// RelatedAndCrosslistedSubjs_ecoSystemData:false
// RelatedAndCrosslistedSubjs_ecoSystemDataFyi:false
// RelatedAndCrosslistedSubjs_formFieldVars:crosslisted|courseCode|code

//======================================================================================================================
// Special service wfrules
// wfrules:AddSisStep|function|AddSisStep|; // Add SIS step (from sisname field) if not DEV
// wfrules:WhatsChanged|function|WhatsChanged|; // Show what has changed
// wforder:WhatsChanged
// wfrules:DumpVars|function|wfDumpVars|cl_subject,other_depts,sponsors
// wforder:DumpVars


//======================================================================================================================
// Workflow selection order, first to last
//======================================================================================================================
wforder:Subjs AcadLevel ProposalState
wforder:Subjs AcadLevel
wforder:Subjs ProposalState
wforder:Subjs standard

wforder:Depts AcadLevel ProposalState
wforder:Depts AcadLevel
wforder:Depts ProposalState
wforder:Depts standard

wforder:Cols AcadLevel ProposalState
wforder:Cols AcadLevel
wforder:Cols ProposalState
wforder:Cols standard

wforder:AcadLevel ProposalState standard
wforder:AcadLevel standard
wforder:ProposalState standard
wforder:standard

//======================================================================================================================
// Check in log
//======================================================================================================================
// Tue Mar 21 11:07:18 CDT 2017 - dscudiero - Added check in log comments
// 04-12-2017 @ 08.10.47 - (//)        - dscudiero - minor cleanup
// 04-14-2017 @ 07.26.51 - (//)        - dscudiero - General syncing of dev to prod
// 05-17-2017 @ 10.50.43 - (//)        - dscudiero - Update the related section
// 06-13-2017 @ 14.04.34 - (//)        - dscudiero - redo the attr definitions
// 07-25-2017 @ 10.55.43 - (//)        - dscudiero - Added checkin log
// 07-26-2017 @ 07.51.45 - (00.83)     - dscudiero - Changed default debugLevel to 3
// 07-27-2017 @ 12.37.01 - (02.50)     - dscudiero - Changed wfDumpVars example code
// 08-02-2017 @ 10.39.53 - (49.99)     - dscudiero - Added expanded workflow orders including AcadLevel
// 08-08-2017 @ 10.53.37 - (12.78)     - dscudiero - Refactored wforder
// 08-09-2017 @ 14.42.44 - (34.37)     - dscudiero - General syncing of dev to prod
