//==================================================================================================
// version:1.0.6 // -- dscudiero -- 02/07/2017 @  9:56:32.59
//==================================================================================================
// ??/??/17 -- dgs -- initial --
//==================================================================================================
//==================================================================================================
// Set debug environments, any comma separated combination of 'dev','test','next'. e.g. debugEnvs:dev,test
wfDebugEnvs:dev
wfAddSisEnvs:test,next

// Set debug message level, integer 0-10
// msgLevel = 0, no messages
//			  1, Messages from functions in workflowFuncs atj
//			  2, Messages from utility functions in workflowFuncs atj
//			  3, Messages from functions in workflowLib atj
//			  4, More detail from functions in workflowLib atj
wfDebugLevel:2

//skiploadsync:true; //Turn off SIS Syncing

//==================================================================================================
//wfcomments = 'all', 'workflow', or some RegEx against the roles.  e.g. 'wfcomments: fyi(all)?$'
//or 'wfcomments: Committee$'
//==================================================================================================
wfcomments:

//==================================================================================================
// Define which variables are substituted -- used by getCimRoles script
//==================================================================================================
wfSubRule:Col|SELECT code,name FROM codedesc WHERE setname="college" and rank >= 0 order by code
wfSubRule:Dept|SELECT code,name FROM codedesc WHERE setname="department" and rank >= 0 order by code
//wfSubRule:Subj|SELECT code,name FROM codedesc WHERE setname="subject" and rank >= 0 order by code

//==================================================================================================
//Configure Voteing
//==================================================================================================
//voteshowfullresults:true
//votesuccesspct:70%
//voterules:FA_Council_vote|FA Council Vote|7|votepasspct=75%;
//voterules:FA_Council_vote|FA Council Vote|7|votesuccesspct:total; votepasspct:1%
//          A              A               A             A
//          |              |               |             |
//          |              |               |             +----  51% of the votes cast have to be yes.
//          |              |               +------- This is the number of days the voting window remains open, 0 means until vote is a success
//          |              +-- This is the 'REAL' RESOLVED name of the voting step
//

//====================================================================================================
// Parallel workflow (esigs) definitions
//esiglist:UCCGC|UCC/GC|function|UCCGCesig;
//esiglist:GCCFS|GC/FS|function|GCFSesig;

//==================================================================================================
// Substitution variables
//==================================================================================================
wfrules:Col|attr|college.code|; //Substitutes current value of 'College' for 'Col'
wfrules:Dept|attr|department.code|; //Substitutes current value of 'Department' for 'Dept'
wfrules:Subj|attr|subject.code|; //Substitutes current value of 'SubJect code' for 'Subj'
//wfrules:AcadLevel|attr|acad_level.code|; //Substitutes current value of 'Academic Level' for 'AcadLevel'

//==================================================================================================
// 'Standard' conditionals
//==================================================================================================
wfrules:isNew|iffieldmatch|newrecord|value=true; //Proposal for a new course
wfrules:isNotNew|function|IsNotNew|; //Proposal is not for a new course
wfrules:isEdit|function|IsEdit|; //Proposal to modify an existing course
wfrules:isNotEdit|iffieldmatch|newrecord|value=true; //Proposal is not Edit
wfrules:isNotEdit|iffieldmatch|deleterec|value=true; //Proposal is not Edit
wfrules:isDelete|iffieldmatch|deleterec|value=true; //Proposal to delete an existing course
wfrules:isNotDelete|function|IsNotDelete|; //Proposal is not for a course deletion
wfrules:isNotNew|function|IsNotNew|; //Proposal is not for a new course

//====================================================================================================
// 'Custom' iffieldmatch conditionals
//====================================================================================================
wfrules:isUndergraduate|iffieldmatch|course_number|value=/^[0-4]\w{2}$/; //Proposal for an Undergraduate course
wfrules:isGraduate|iffieldmatch|course_number|value=/^[5-9]\w{2}$/; //Proposal for an Graduate course
//wfrules:isGenEd|iffieldmatch|???????.code|value=/^(C$%7CW)$/; //Proposal for an Gen Ed course

//wfrules:????|iffieldmatch|???????.code|value=/^( ? %7C ? %7C ? )$/; //Remove blanks in regex

//====================================================================================================
// 'Custom' Workflow function bindings
//====================================================================================================

//====================================================================================================
// 'Standard' Workflow function bindings
//====================================================================================================
wfrules:ProposalState|function|ProposalState|; // Substitute proposal state for workflow selection
wfrules:RelatedDepts|function|RelatedDepts|; // Standard (core) RelatedDepts
//wfrules:AddSisStep|function|AddSisStep|; // Add SIS step (from sisname field) if not DEV
//wfrules:WhatsChanged|function|WhatsChanged|; // Show what has changed

//==================================================================================================
// Related and Associated steps
//==================================================================================================
// Setup rules for non-controlling entities, steps give for each
// wfrules:RelatedAndCrosslistedCols|function|Related|; //Includes steps with departments from the Courseleaf eco-system and any crosslisted courses
// RelatedAndCrosslistedCols_ecoSystemData:true
// RelatedAndCrosslistedCols_ecoSystemDataFyi:true
// RelatedAndCrosslistedCols_formFieldVars:crosslisted|code
//
// wfrules:RelatedAndCrosslistedDepts|function|Related|; //Includes steps with departments from the Courseleaf eco-system and any crosslisted courses
// RelatedAndCrosslistedDepts_ecoSystemData:true
// RelatedAndCrosslistedDepts_ecoSystemDataFyi:true
// RelatedAndCrosslistedDepts_formFieldVars:crosslisted|code
//
// wfrules:RelatedAndCrosslistedSubjs|function|Related|; //Includes steps with subjects from the Courseleaf eco-system and any crosslisted courses
// RelatedAndCrosslistedSubjs_ecoSystemData:true
// RelatedAndCrosslistedSubjs_ecoSystemDataFyi:true
// RelatedAndCrosslistedSubjs_formFieldVars:crosslisted|code

//==================================================================================================
// Workflow selection order, first to last
//==================================================================================================
//wforder:WhatsChanged
wforder:Subj ProposalState
wforder:Subj standard
wforder:Dept ProposalState
wforder:Dept standard
wforder:Col ProposalState
wforder:Col standard
wforder:ProposalState standard
wforder:standard

