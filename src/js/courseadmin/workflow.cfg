//======================================================================================================================
// version:1.0.5 // -- dscudiero -- Thu 05/17/2018 @  9:53:56.60
// ??/??/17 - dgs - Initial - ??
//======================================================================================================================
// Set debug environments, any comma separated combination of 'dev','test','next'. e.g. debugEnvs:dev,test
wfDebugEnvs:dev,test
wfAddSisEnvs:test,next
//skiploadsync:true; //Turn off SIS Syncing
wfDebugLevel:1

//======================================================================================================================
//wfcomments = 'all', 'workflow', or some RegEx against the roles.  e.g. 'wfcomments: fyi(all)?$'
//or 'wfcomments: Committee$'
//======================================================================================================================
wfcomments:

//======================================================================================================================
// Define which variables are substituted -- used by getCimRoles script
// wfSubRule:<attrName>|<sql query> or [data enumeration]|<optional mapper type>
//======================================================================================================================
wfSubRule:Col|SELECT code,name,access FROM codedesc WHERE setname="college"|col
wfSubRule:Dept|SELECT code,name,access FROM codedesc WHERE setname="department"|dept
wfSubRule:Subj|SELECT code,name,access FROM codedesc WHERE setname="subject"|subj
wfSubRule:AcadLevel|[UG,GR]

//======================================================================================================================
// Substitution variables
//======================================================================================================================
// Add tcfonly=true; to only substitute the tcf data
//======================================================================================================================
wfrules:Col|function|wfAttr|; //Substitutes the value(s) for'college' resolved through allcodes
wfrules:Dept|function|wfAttr|; //Substitutes the value(s) for 'department' resolved through allcodes
wfrules:Subj|function|wfAttr|; //Substitutes the value(s) for 'subject' resolved through allcodes

//======================================================================================================================
// 'Proposal State' conditionals
//======================================================================================================================
wfrules:isNew|iffieldmatch|newrecord|value=true; //Proposal for a new course
wfrules:isNotNew|function|IsNotNew|; //Proposal is not for a new course
wfrules:isEdit|function|IsEdit|; //Proposal to modify an existing course
wfrules:isNotEdit|iffieldmatch|newrecord|value=true; //Proposal is not Edit
wfrules:isNotEdit|iffieldmatch|deleterec|value=true; //Proposal is not Edit
wfrules:isDelete|iffieldmatch|deleterec|value=true; //Proposal to delete an existing course
wfrules:isNotDelete|function|IsNotDelete|; //Proposal is not for a course deletion
wfrules:isInactivate|function|IsInactivate|; //Proposal to delete an existing course
wfrules:isReactivate|function|IsReactivate|; //Proposal to reactivate an deleted course

//======================================================================================================================
// 'Custom' iffieldmatch conditionals
//======================================================================================================================
wfUgRe:^([1-4]\d{2}[A-Z]{0,1}|[1-9]\d{1}[A-Z]{0,1})$
wfGrRe:^([5-9]\d{2}[A-Z]{0,1}|[1-9]\d{3}[A-Z]{0,1})$
//wfGrRe:^((?!UGRD).)*$

wfrules:isUndergraduate|function|CheckAcadLevel|course_number,wfUgRe; //Proposal for an Undergraduate course
wfrules:isGraduate|function|CheckAcadLevel|course_number,wfGrRe; //Proposal for an Graduate course
wfrules:AcadLevel|function|GetAcadLevel|course_number,wfUgRe,UG,wfGrRe,GR; //Returns the academic level, 'UG' or 'GR'

//wfrules:conditionalName|iffieldmatch|variableName.code|value=/^(val1 %7C val2 %7C val3)$/; //Proposal for

//======================================================================================================================
// 'Custom' Workflow function bindings
//======================================================================================================================

//======================================================================================================================
// 'Standard' Workflow function bindings
//======================================================================================================================
wfrules:RelatedDepts|function|RelatedDepts|; //Standard (core) RelatedDepts
wfrules:ProposalState|function|ProposalState|; //Substitute proposal state for workflow selection
wfrules:AddSisStep|function|AddSisStep|; //Add the SIS step as defined in cimconfig.cfg
wfrules:WfStatus|function|TODO|Awaiting final client approval; //Put a TODO message to the preview workflow screen
wfrules:Annotate|function|AnnotateWorkflow|;
wfrules:annotate|function|AnnotateWorkflow|;
wfrules:NoWorkflow|function|NoWorkflow|; //There is insufficient data to calculate workflow
wfrules:NotifyAllApprovers|function|NotifyAllApprovers|; //Adds steps to notify all previous approver steps in workflow
wfrules:isNotFirstStep|function|IsNotFirstStep|; //Include step only if it will not be the first step in workflow (i.e. for regen)
wfrules:wfLibVersion|attr|wfLibVersion|; //Display the version information for the workflowLib.atj file
wfrules:CheckOnDisk|function|CheckOnDisk|

//======================================================================================================================
// Special service wfrules
//======================================================================================================================
//wfrules:WhatsChanged|function|WhatsChanged|; //Show what has changed
//wforder:WhatsChanged
//wfrules:wfDumpVars|function|wfDumpVars|cl_subject,other_depts,sponsors
//wforder:wfDumpVars

//======================================================================================================================
// Workflow selection order, first to last
//======================================================================================================================
wforder:Inactivate standard isDelete
wforder:Reactivate standard isReactivate

wforder:Subj Inactivate standard isDelete
wforder:Subj Reactivate standard isReactivate
wforder:Subj AcadLevel ProposalState
wforder:Subj ProposalState
wforder:Subj AcadLevel

wforder:Dept Inactivate standard isDelete
wforder:Dept Reactivate standard isReactivate
wforder:Dept AcadLevel ProposalState
wforder:Dept ProposalState
wforder:Dept AcadLevel

wforder:Col Inactivate standard isDelete
wforder:Col Reactivate standard isReactivate
wforder:Col AcadLevel ProposalState
wforder:Col ProposalState
wforder:Col AcadLevel

wforder:Col standard
wforder:Dept standard

wforder:ProposalState standard
wforder:standard

//======================================================================================================================
// version:1.0.40 // -- dscudiero -- Wed 02/21/2018 @ 15:34:12.60
//======================================================================================================================
// Check-in log
//======================================================================================================================
// 08-08-2017 @ 10.53.28 - (41.16)     - dscudiero - Refactored wforder
// 08-08-2017 @ 16.31.15 - (35.19)     - dscudiero - misc updates
// 08-09-2017 @ 14.42.37 - (06.84)     - dscudiero - General syncing of dev to prod
// 08-23-2017 @ 10.33.36 - (20.74)     - dscudiero - removed client specific records
// 08-24-2017 @ 10.03.08 - (20.74)     - dscudiero - 
// 08-24-2017 @ 10.03.20 - (20.74)     - dscudiero - General syncing of dev to prod
// 08-25-2017 @ 10.57.35 - (30.19)     - dscudiero - Added the Form fields referenced section
// 08-28-2017 @ 11.41.49 - (29.48)     - dscudiero - Add TODO
// 09-06-2017 @ 07.26.03 - (28.78)     - dscudiero - Add example of voting record
// 09-11-2017 @ 15.51.46 - (28.78
)    - dscudiero - General syncing of dev to prod
// 09-22-2017 @ 12.14.55 - (19.78)     - dscudiero - Added NoWorkflow
// 10-03-2017 @ 10.07.30 - (29.10)     - dscudiero - Updated Vote example to remove blanks after the ';'s
// 10-17-2017 @ 10.10.06 - (10.81)     - dscudiero - Removed the ';' at the end of the esiglist examples
// 10-24-2017 @ 13.53.35 - (18.71)     - dscudiero - Remove debug statements from getAttrVal
// 10-25-2017 @ 09.37.46 - (55.46)     - dscudiero - Reformatted comments
// 10-25-2017 @ 16.44.40 - (00.98)     - dscudiero - Updated GetAttrVal to look at the tcf/tca data first
// 11-09-2017 @ 14.15.16 - (00.98)     - dscudiero - Added NotifyAllApprovers
// 11-28-2017 @ 16.54.26 - (21.69)     - dscudiero - Added the isNotFirstStep conditional & code
// 12-05-2017 @ 11.06.09 - (51.54)     - dscudiero - Added the Annotate function
// 12-21-2017 @ 13.21.25 - (wfLibVersi - dscudiero - Add displaying 'wfLibVersion' in the debug workflow
