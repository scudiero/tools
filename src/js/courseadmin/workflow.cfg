//======================================================================================================================
// ??/??/18 - dgs - Initial - ??
//======================================================================================================================
// Set debug environments, any comma separated combination of 'dev','test','next'. e.g. debugEnvs:dev,test
wfDebugEnvs:dev,test
wfDebugLevel:1

//======================================================================================================================
//wfcomments = 'all', 'workflow', or some RegEx against the roles.  e.g. 'wfcomments: fyi(all)?$'
//or 'wfcomments: Committee$'
//======================================================================================================================
wfcomments:

//======================================================================================================================
//Notes to the Client, CSM, Pilot reps, or CIM devs -- used by getWorkflows WorkWith action
// wfNote:{"client","csm","pilot","dev"}|noteText
//======================================================================================================================
//wfNote:client|

wfNote:csm|Form not completed, workflow has not been tested
wfNote:csm|Cimlookup (sisparent) data not complete, 'dept' and 'col' substitution will not be as expected
wfNote:csm|Please review the comments for the client, pilot rep, and developer

wfNote:pilot|Please review the comments for the CSM and developer
//wfNote:dev|

//======================================================================================================================
// Define which variables are substituted -- used by getWorkflows WorkWith action
// wfSubRule:<attrName>|<sql query> or [data enumeration]|<optional mapper type>
//======================================================================================================================
wfSubRule:Col|SELECT code FROM codedesc WHERE setname="college" and rank >= 0 and (access <> 'retired' OR access IS NULL) order by code
wfSubRule:Dept|SELECT code FROM codedesc WHERE setname="department" and rank >= 0 and (access <> 'retired' OR access IS NULL) order by code
wfSubRule:Subj|SELECT code FROM codedesc WHERE setname="subject" and rank >= 0 and (access <> 'retired' OR access IS NULL) order by code
wfSubRule:RelatedDepts|wfSubRule(Dept)
wfSubRule:Consultation|noexpansion
wfSubRule:AcadLevel|[UG,GR,PR]
wfSubRule:ProposalState|[New,Edit,Delete,Inactivate,Reactivate]

//======================================================================================================================
// Substitution variables
//======================================================================================================================
// Add tcfonly=true; to only substitute the tcf data
//======================================================================================================================
wfrules:Col|function|wfAttr|includeTCA noMapValue; //Expands 'Col' to the 'college.code' value from the proposal including TCA data
wfrules:Dept|function|wfAttr|includeTCA noMapValue; //Expands 'Dept' to the 'department.code' value from the proposal including TCA data
wfrules:Subj|function|wfAttr|includeTCA noMapValue; //Expands 'Subj' to the 'subject.code' value from the proposal including TCA data

//======================================================================================================================
// 'Proposal State' conditionals
//======================================================================================================================
wfrules:isNew|iffieldmatch|newrecord|value=true|; //Proposal for a new course
wfrules:isNotNew|function|IsNotNew|; //Proposal is not for a new course
wfrules:isEdit|function|IsEdit|; //Proposal to modify an existing course
wfrules:isNotEdit|iffieldmatch|newrecord|value=true|; //Proposal is not Edit
wfrules:isNotEdit|iffieldmatch|deleterec|value=true|; //Proposal is not Edit
wfrules:isDelete|iffieldmatch|deleterec|value=true|; //Proposal to delete an existing course
wfrules:isNotDelete|function|IsNotDelete|; //Proposal is not for a course deletion
wfrules:isInactivate|function|IsInactivate|; //Proposal to inactivate an existing course
wfrules:isNotInactivate|function|IsInactivate|; //Proposal not to inactivate an existing course
wfrules:isReactivate|function|IsReactivate|; //Proposal to reactivate an deleted course
wfrules:isNotReactivate|function|IsReactivate|; //Proposal not to reactivate an deleted course

//======================================================================================================================
// Academic level
//======================================================================================================================
//wfUgRe:^([1-4]\d{2}[A-Z]{0,1}|[1-9]\d{1}[A-Z]{0,1})$
//wfGrRe:^([5-9]\d{2}[A-Z]{0,1}|[1-9]\d{3}[A-Z]{0,1})$
//wfGrRe:^((?!UGRD).)*$

//wfrules:isUndergraduate|function|CheckAcadLevel|course_number,wfUgRe; //Proposal for an Undergraduate course
//wfrules:isGraduate|function|CheckAcadLevel|course_number,wfGrRe; //Proposal for an Graduate course
//wfrules:AcadLevel|function|GetAcadLevel|course_number,wfUgRe,UG,wfGrRe,GR; //Returns the academic level, {'UG','GR'}
//wfrules:isGenEd|iffieldmatch|<someVariable>.code|value=/^(<someValue> %7C <someValue> %7C <someValue>)$/|; //Proposal for a General Education course

//======================================================================================================================
// 'Custom' iffieldmatch conditionals
//======================================================================================================================
//wfrules:conditionalName|iffieldmatch|<someVariable>.code|value=/^(<someValue> %7C <someValue> %7C <someValue>)$/|; //Proposal for

//======================================================================================================================
// 'Custom' Workflow function bindings
//======================================================================================================================

//======================================================================================================================
// 'Standard' Workflow function bindings
//======================================================================================================================
wfrules:RelatedDepts|function|RelatedDepts|; //Add steps for departments from the eco system
wfrules:ProposalState|function|ProposalState|; // Substitute proposal state for workflow selection, {'New','Edit','Deactivate','Inactivate','Reactivate'}
//wfrules:Annotate|function|AnnotateWorkflow|; //Annotate workflow -- text to appear in preview workflow
//wfrules:NoWorkflow|function|NoWorkflow|; //There is insufficient data to calculate workflow
//wfrules:NotifyAllApprovers|function|NotifyAll|spprovers; //Adds steps to notify all previous approver steps in workflow
//wfrules:isNotFirstStep|function|IsNotFirstStep|; //Include step only if it will not be the first step in workflow (i.e. for regen)

//======================================================================================================================
// Special service wfrules
//======================================================================================================================
//wfrules:wfDumpVars|function|wfDumpVars|cl_subject,other_depts,sponsors
//wforder:wfDumpVars

//======================================================================================================================
// Workflow selection order, first to last
//======================================================================================================================
wforder:Col/Dept/Subj AcadLevel ProposalState standard
wforder:Col/Dept/Subj AcadLevel standard
wforder:Col/Dept/Subj ProposalState standard
wforder:Col/Dept/Subj standard

wforder:Col/Dept AcadLevel ProposalState standard
wforder:Col/Dept AcadLevel standard
wforder:Col/Dept ProposalState standard
wforder:Col/Dept standard

wforder:Dept/Subj AcadLevel ProposalState standard
wforder:Dept/Subj AcadLevel standard
wforder:Dept/Subj ProposalState standard
wforder:Dept/Subj standard

wforder:Subj AcadLevel ProposalState standard
wforder:Subj AcadLevel standard
wforder:Subj ProposalState standard
wforder:Subj standard

wforder:Dept AcadLevel ProposalState standard
wforder:Dept AcadLevel standard
wforder:Dept ProposalState standard
wforder:Dept standard

wforder:Col AcadLevel ProposalState standard
wforder:Col AcadLevel standard
wforder:Col ProposalState standard
wforder:Col standard

wforder:AcadLevel ProposalState standard
wforder:AcadLevel standard
wforder:ProposalState standard
wforder:standard